

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creation of Own Robot Models &mdash; Rosvita documentation  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Rosvita documentation  documentation" href="index.html"/>
        <link rel="next" title="ROSVITA Graph Concept" href="Graph_Concept.html"/>
        <link rel="prev" title="ROSVITA Code Editor" href="Code_Editor.html"/> 

  
  <script src="static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home">
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Getting_Started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="Main_View.html">ROSVITA Main View</a></li>
<li class="toctree-l1"><a class="reference internal" href="New_Project.html">Creating a New Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="Robot_Configuration.html">Creating a Robot Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Path_Planning.html">Path Planning (“World View”)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Robot_Jogging.html">Robot Jogging</a></li>
<li class="toctree-l1"><a class="reference internal" href="File_Browser.html">ROSVITA File Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="Code_Editor.html">ROSVITA Code Editor</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creation of Own Robot Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#relocation-of-the-tool-center-point-tcp">Relocation of the “Tool Center Point (TCP)”:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Graph_Concept.html">ROSVITA Graph Concept</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lua_Scripts.html">Using Lua Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Combination_with_External_ROS.html">Access to ROSVITA from External ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Complex_Scene.html">Building a Complex Scene</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rosvita documentation</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Creation of Own Robot Models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="sources/Own_Robot_Models.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creation-of-own-robot-models">
<h1>Creation of Own Robot Models<a class="headerlink" href="#creation-of-own-robot-models" title="Permalink to this headline">¶</a></h1>
<p>In the ROSVITA file browser under the path <code class="docutils literal"><span class="pre">/home/xamla/Rosvita.Control/library/robot_parts/</span></code> you will find the different robot models (for example <code class="docutils literal"><span class="pre">universal_robots/part_ur5</span></code>). These include the following files and folders:</p>
<ul class="simple">
<li>Folder “collision” (contains the .stl files for the collision model)</li>
<li>Folder “visual” (contains the .dae files for the visualization)</li>
<li>.xacro file containing the description of the robot model</li>
<li>File “part.json” containing the MoveIt! configuration of the robot model</li>
<li>Files “CMakeLists.txt” and “package.xml” for compiling in a “Catkin” workspace under ROS.</li>
</ul>
<p>To upload your own robot model, you first have to provide all of the above listed files that belong to a robot configuration.
In some cases, corresponding files are already provided by the robot manufacturer (such as from <a class="reference external" href="https://github.com/ros-industrial/universal_robot/">Universal Robots at GitHub</a>). In this case, the corresponding files and folders only need to be adjusted so that they match the ROSVITA folder structure.
If you want to build a robot model completely by yourself, the following <a class="reference external" href="http://wiki.ros.org/urdf/Tutorials">URDF/Xacro-Tutorials</a>, as well as this <a class="reference external" href="http://wiki.ros.org/urdf/XML/model">explanation of the URDF</a> will help to construct your own robot model.</p>
<p><em>The “Unified Robot Description Format” (URDF) is an XML specification to describe a robot. The use of this specification assumes that the robot can be described as a tree structure and that the robot consists of rigid links connected by joints. The specification covers the kinematic and dynamic description of the robot, the visual representation and the collision model of the robot. Moreover, “Xacro” is an XML macro language. With “Xacro” you can construct shorter and more readable XML files by using macros that bundle larger XML expressions into more compact ones.</em></p>
<p>To upload a folder containing your own robot model to the ROSVITA server, it is best to pack and compress it first: <code class="docutils literal"><span class="pre">tar</span> <span class="pre">cvfz</span> <span class="pre">my_robot.tgz</span> <span class="pre">my_robot</span></code>.
Then with the ROSVITA file browser go into the directory <code class="docutils literal"><span class="pre">/home/xamla/Rosvita.Control/library/robot_parts/</span></code> and press the “Upload” button, after which you can upload the folder “<code class="docutils literal"><span class="pre">my_robot.tgz</span></code>”. Now the uploaded folder only needs to be unpacked. To do this, use the ROSVITA terminal to go to the higher-level folder <code class="docutils literal"><span class="pre">cd</span> <span class="pre">/home/xamla/Rosvita.Control/library/robot_parts/</span></code> and then enter the following command: <code class="docutils literal"><span class="pre">tar</span> <span class="pre">-xzvf</span> <span class="pre">my_robot.tgz</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the current ROSVITA start script <strong>rosvita-start.sh</strong> (see chapter <a class="reference internal" href="Getting_Started.html#getting-started-label"><span class="std std-ref">Getting Started</span></a>) there is a Docker mapping of your own local “robot_parts” folder (<code class="docutils literal"><span class="pre">~/Rosvita/robot_parts</span></code>) to a subfolder “custom” of the folder “robot_parts” in the ROSVITA library (<code class="docutils literal"><span class="pre">/home/xamla/Rosvita.Control/library/robot_parts/custom</span></code>). So to make your own robot model selectable in ROSVITA, it is not necessary to upload it to the ROSVITA server, but it is sufficient to place it in your own “robot_parts” folder (<code class="docutils literal"><span class="pre">/home/&lt;username&gt;/Rosvita/robot_parts</span></code>) and restart ROSVITA once (<code class="docutils literal"><span class="pre">docker</span> <span class="pre">stop</span> <span class="pre">rosvita;</span> <span class="pre">./rosvita-start.sh</span></code>).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When creating your own robot models, make sure that these models do not become too large (do not use several GigaByte large CAD files), because working with (and especially visualizing) such huge models is naturally very slow.</p>
</div>
<p>In the ROSVITA file browser under the path <code class="docutils literal"><span class="pre">/home/xamla/git/</span></code> you will find some additional GitHub repositories with robot models and drivers. Under the path <code class="docutils literal"><span class="pre">/home/xamla/catkin_ws/src/</span></code> there are links to some of these repositories, links to some other components of ROSVITA, and most important a link to the folder <code class="docutils literal"><span class="pre">/home/xamla/Rosvita.Control/library/robot_parts</span></code>. The ROSVITA terminal can be used to create links to other repositories (e.g. <code class="docutils literal"><span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">/home/xamla/git/my_robot_driver</span> <span class="pre">/home/xamla/catkin_ws/src/</span></code>). To build the catkin workspace with the ROSVITA terminal simply go into the catkin workspace (<code class="docutils literal"><span class="pre">cd</span> <span class="pre">/home/xamla/catkin_ws/</span></code>) and enter the command <code class="docutils literal"><span class="pre">catkin_make</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All robot models uploaded to the library will get lost when ROSVITA is stopped (-&gt; no permanent storage). It is therefore advisable to upload the self-created robot models to your own project folder (under <code class="docutils literal"><span class="pre">/home/xamla/Rosvita.Control/projects/&lt;project</span> <span class="pre">name&gt;/robotModel/</span></code>). Changes in your own project folder are also stored locally in the corresponding project folder (under <code class="docutils literal"><span class="pre">/home/&lt;username&gt;/Rosvita/projects/&lt;project</span> <span class="pre">name&gt;/robotModel/</span></code>) and are thus retained even after ROSVITA has been stopped and detached from the Docker container.</p>
</div>
<div class="section" id="relocation-of-the-tool-center-point-tcp">
<h2>Relocation of the “Tool Center Point (TCP)”:<a class="headerlink" href="#relocation-of-the-tool-center-point-tcp" title="Permalink to this headline">¶</a></h2>
<p>To relocate the tool center point and the corresponding interactive marker in the 3D View, a “tcp_link” must be added to the file “robotModel/main.xacro” in the corresponding project folder.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">link</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;tcp_link&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">joint</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;tcp_joint_F&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;fixed&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">child</span> <span class="n">link</span><span class="o">=</span><span class="s2">&quot;tcp_link&quot;</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="n">parent</span> <span class="n">link</span><span class="o">=</span><span class="s2">&quot;wrist_3_link&quot;</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="n">origin</span> <span class="n">xyz</span><span class="o">=</span><span class="s2">&quot;-0.0037 -0.0072 0.2092&quot;</span> <span class="n">rpy</span><span class="o">=</span><span class="s2">&quot;0 0 0&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">joint</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>“origin xyz” and “rpy” are the position and rotation (Euler angles) of the TCP relative to the parent link (here: “wrist_3_link”).
After this addition of the “tcp_link” in the file “robotModel/main.xacro”, this file has to be recompiled by pressing the “Compile” button of the ROSVITA xacro editor.
Hereupon, the new tcp link appears in the 3D view to the right of the opened .xacro file.
When changing to the “Configuration View”, the new configuration must be compiled first (i.e. click the “Compile” button in the “Configuration View”) so that the new link is displayed and selectable (e.g. as “Tip Link” of a “Move Group”).
Thereto, in the “Configuration View” under “MotionPlanning”-&gt;”MoveIt! Motion Planning Framework (ROS)”-&gt;”groups”-&gt;”<em>&lt;group_name&gt;</em>” select the new “tcp_link” as “Tip link”. After building the new robot configuration, starting ROS and changing into the “World View”, the interactive marker appears at the new tcp link.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Graph_Concept.html" class="btn btn-neutral float-right" title="ROSVITA Graph Concept" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Code_Editor.html" class="btn btn-neutral" title="ROSVITA Code Editor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Xamla.com.
      Last updated on Feb 20, 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="static/jquery.js"></script>
      <script type="text/javascript" src="static/underscore.js"></script>
      <script type="text/javascript" src="static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>